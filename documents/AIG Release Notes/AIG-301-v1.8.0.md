# AIG-301 Series v1.8 Release Notes

Release Date: Nov 2025

## Enhancements

1. RED Cybersecurity EN18031-1 compliance.</br>
   To adopt RED Cybersecurity EN18031-1, the AIG includes the changes below:
   - HTTPS connection now only supports TLS v1.2 or higher.
   - HTTP redirect to HTTPS service now is enabled as default
   - Force to modify the admin's password upon the first login
   - Remove the default password for the Wi-Fi AP feature

## Bugs Fixed

1. When the WAN connection was restored by replugging the Ethernet cable, the connection to the AWS IoT Core service was not re-established.
2. The certificat weren't received properly after the AIG was fully registered, and the Moxa DLM Service returned error code 500
3. The tag type changed from uint16 to double when the scalingFunc in the exported Modbus CSV file was set to 1 and then imported again.
4. Upgrade thingspro-agent to v2.3.0 that extended Azure IoT Edge module token refresh interval to reduce disconnection risks.
5. Failed to establish a 2G cellular connection in the EU
6. The DO value ddin't refresh immediatelly when the tag value had been modified.

Changes

1. Upgrade Azure IoT Device SDK to LTS_03_2025.
2. When no DNS information is received on the cellular interface, treat the network as connected. Note that this may affect the Cellular Enable check-alive mechanism. Ensure that a reachable target host is properly configured to prevent the check-alive process from looping.
3. Sensitive and confidential data under the ThingsPro folder is now protected by permission control. Unauthorized users cannot read, write, or execute such data.
4. OPC UA Server changes:
   - The OPC UA server now generates X.509 private keys with a length of 2048 bits.
   - The signing algorithm has been upgraded to SHA-256.
   - Existing OPC UA server certificates will continue to be used. The new key length and algorithm apply only to certificates generated after the v1.8.0 upgraded.
   - The OPC UA server no longer includes any default or built-in user accounts.
   - User account information is now excluded from the OPC UA server’s configuration import/export operations."
5. The Wi-Fi AP feature no longer ships with a default password.
6. Function changes:
   - The Function (container) has been upgraded from Python 3.9 to Python 3.10.8
   - For python package migration, the system will automatically reinstall the user’s desired packages with network access; or you can call GET /api/v1/function/requirements/migration to retrieve the list of desired packages without network access. To provide flexibility, new APIs are available to manage the migration process:
     1. GET /api/v1/function/requirements/migration: Fetch current settings, migration results, and desired packages.
     2. PUT /api/v1/function/requirements/migration: Update settings (e.g., enable/disable migration, timeout duration).

## Notes

1. Tag Dashboard Value Precision Issue
   - The tag monitor may display incorrect values when handling numbers beyond JavaScript’s safe integer range (±2^53 − 1, i.e., from −9,007,199,254,740,991 to 9,007,199,254,740,991).
   - This is due to a limitation in JavaScript number precision. When values such as int64 or uint64 exceed this range, browsers (e.g., Chrome) will show distorted results when parsing JSON raw data."
2. Upgrade From the Local Drive to upload the upgrade package requires a minimum upload speed of 1MB/sec.
3. The OPC UA Server certificate generation may rarely fail due to a race condition, which may be triggered if the apply operation is executed immediately after the regenerate operation in very quick succession. Perform an enable/disable OPC UA Server cycle to restore normal operation.

## Installation

Pre-request：AIG-301 Firmware Version:1.7.X and ThingsPro Version: 2.5.1-4424

### Upgrade Firmware

1. Download the deb file from the download link or copy the patch yaml URI.
2. Login to Web with admin permissions, go to General Operation > Software Upgrade
   1. select Upgrade From the Local Drive with the deb file.
   2. select Download Over the Air, input the URI link of patch yaml. (Do not select this way, if the known issue, container IP conflicts, occurred)
3. (optional) Please reboot if the snapshot of the software upgrade is disabled.
4. Confirm that the **Firmware Version** on the Dashboard page is **1.8.0** and **ThingsPro Version** is **2.6.0-4499**.

### Upgrade ThingsPro Agent

1. Deploy IoT Edge Module thingspro-agent with URI: moxa2019/thingspro-agent:2.3.0-armhf in IoTHub.
2. Set the create option:
    ```
    {
        "HostConfig": {
            "Binds": [
                "/var/thingspro/apps/azureiotedge/data/setting/:/var/thingspro/cloud/setting/",
                "/run/:/host/run/",
                "/var/thingspro/data/:/var/thingspro/data/"
            ]
        }
    }
    ```

### Notes

1. The upgrade package size is approximately 369 MB, and the upgrade process may take 20+ minutes.
